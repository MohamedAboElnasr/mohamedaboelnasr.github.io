<script>
document.addEventListener("DOMContentLoaded", function() {
  /* --- Scroll Animations --- */
  var observerOptions = {
    threshold: 0.1,
    rootMargin: "0px 0px -50px 0px"
  };

  var observer = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) {
        entry.target.classList.add("in-view");
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  var elementsToAnimate = document.querySelectorAll("article h1, article h2, article p, article pre, article img, .post-content > *");
  elementsToAnimate.forEach(function(el) {
    el.classList.add("fade-in-up");
    observer.observe(el);
  });

  /* --- 3D Tilt Effect for Cards --- */
  var cards = document.querySelectorAll(".card, .post-preview");

  cards.forEach(function(card) {
    card.addEventListener("mousemove", function(e) {
      var rect = card.getBoundingClientRect();
      var x = e.clientX - rect.left;
      var y = e.clientY - rect.top;
      
      var centerX = rect.width / 2;
      var centerY = rect.height / 2;
      
      var rotateX = ((y - centerY) / centerY) * -5;
      var rotateY = ((x - centerX) / centerX) * 5;

      card.style.transform = "perspective(1000px) rotateX(" + rotateX + "deg) rotateY(" + rotateY + "deg) scale3d(1.02, 1.02, 1.02)";
      card.style.transition = "transform 0.1s ease";
    });

    card.addEventListener("mouseleave", function() {
      card.style.transform = "perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)";
      card.style.transition = "transform 0.5s ease";
    });
  });

  /* --- Typing Effect for Tagline --- */
  var tagline = document.querySelector(".site-subtitle, .tagline");
  if (tagline) {
    var text = tagline.innerText;
    tagline.innerText = "";
    tagline.style.opacity = "1";
    
    var i = 0;
    function typeWriter() {
      if (i < text.length) {
        tagline.innerHTML += text.charAt(i);
        i++;
        setTimeout(typeWriter, 50);
      }
    }
    
    /* Add blinking cursor effect */
    var style = document.createElement("style");
    style.innerHTML = ".site-subtitle::after { content: '|'; animation: blink 1s step-end infinite; } @keyframes blink { 50% { opacity: 0; } }";
    document.head.appendChild(style);
    
    setTimeout(typeWriter, 500);
  }
});
</script>
